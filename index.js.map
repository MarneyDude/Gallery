{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport class PixabayApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n    this.perPage = 15;\n    this.apiKey = '49255995-7f6d469d944259310339ef533';\n    this.baseURL = 'https://pixabay.com/api/';\n  }\n\n  async fetchImages() {\n    const params = new URLSearchParams({\n      key: this.apiKey,\n      q: this.searchQuery,\n      image_type: 'photo',\n      page: this.page,\n      per_page: this.perPage,\n      orientation: 'horizontal',\n      safesearch: true,\n    });\n\n    try {\n      const response = await axios.get(this.baseURL, { params });\n\n      const { hits, totalHits } = response.data;\n\n      if (hits.length === 0) {\n        this.showToast(\n          'Sorry,',\n          'There are no images matching your search query. Please try again!',\n          'warning',\n        );\n        return { hits: [], totalHits: 0 };\n      }\n\n      this.page += 1;\n      return { hits, totalHits };\n    } catch (error) {\n      console.error('Error fetching data:', error);\n      this.showToast(\n        'Error',\n        'fetching data. Please try again later.',\n        'error',\n      );\n      return { hits: [], totalHits: 0 };\n    }\n  }\n\n  reset() {\n    this.page = 1;\n  }\n\n  setQuery(query) {\n    this.searchQuery = query;\n    this.reset();\n  }\n\n  showToast(title, message, type = 'info') {\n    iziToast.show({\n      backgroundColor: '#f36f07',\n      title,\n      titleSize: 20,\n      message,\n      position: 'topRight',\n      iconUrl: 'https://www.svgrepo.com/show/340010/cloud-data-ops.svg',\n      iconColor: '#ffffff',\n      messageSize: '20',\n      messageColor: 'black',\n      timeout: 3000,\n      class: type,\n    });\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryEl = document.querySelector('.js-gallery');\nlet lightbox = new SimpleLightbox('.gallery__container a');\n\nexport function renderGallery(imagesArr) {\n  const markup = imagesArr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n          <li class=\"gallery__item\">\n            <div class=\"gallery__container\">\n              <a href=\"${largeImageURL}\">\n                <img \n                  class=\"gallery__image\"\n                  src=\"${webformatURL}\"\n                  alt=\"${tags}\"\n                  loading=\"lazy\"\n                />\n              </a>\n              <ul class=\"gallery_user-stats\">\n                <li class=\"gallery__user-stats-item\">\n                  <p class=\"gallery__user-stats-text\">Likes: <span>${likes}</span></p>\n                </li>\n                <li class=\"gallery__user-stats-item\">\n                  <p class=\"gallery__user-stats-text\">Views: <span>${views}</span></p>\n                </li>\n                <li class=\"gallery__user-stats-item\">\n                  <p class=\"gallery__user-stats-text\">Comments: <span>${comments}</span></p>\n                </li>\n                <li class=\"gallery__user-stats-item\">\n                  <p class=\"gallery__user-stats-text\">Downloads: <span>${downloads}</span></p>\n                </li>\n              </ul>\n            </div>\n          </li>`;\n      },\n    )\n    .join('');\n\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  galleryEl.innerHTML = '';\n}\n","import { PixabayApiService } from './js/pixabay-api.js';\nimport { renderGallery, clearGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst formEl = document.querySelector('.form');\nconst paginationButton = document.querySelector('.js-load-more-button');\nconst loader = document.querySelector('.loader');\n\nconst apiService = new PixabayApiService();\n\nformEl.addEventListener('submit', async (event) => {\n  event.preventDefault();\n\n  const formData = new FormData(formEl);\n  const inputQuery = formData.get('input').trim();\n\n  if (!inputQuery) {\n    return;\n  }\n\n  apiService.setQuery(inputQuery);\n\n  clearGallery();\n\n  loaderDisplayOn();\n  paginationButton.classList.remove('display-On-Of');\n\n  const { hits, totalHits } = await apiService.fetchImages();\n\n  loaderDisplayOff();\n\n  if (hits.length > 0) {\n    renderGallery(hits);\n    paginationBtnDisplayToggle(apiService, paginationButton, totalHits);\n  }\n\n  formEl.reset();\n});\n\npaginationButton.addEventListener('click', async (event) => {\n  event.preventDefault();\n\n  loaderDisplayOn();\n\n  const { hits, totalHits } = await apiService.fetchImages();\n\n  loaderDisplayOff();\n\n  if (hits.length > 0) {\n    renderGallery(hits);\n    paginationBtnDisplayToggle(apiService, paginationButton, totalHits);\n  }\n\n  const firstGalleryItem = document.querySelector('.gallery__item');\n  if (firstGalleryItem) {\n    const { height } = firstGalleryItem.getBoundingClientRect();\n    window.scrollBy({ top: height * 2, behavior: 'smooth' });\n  }\n});\n\nfunction paginationBtnDisplayToggle(apiService, paginationButton, totalHits) {\n  const displayToggle = (apiService.page - 1) * apiService.perPage <= totalHits;\n\n  paginationButton.classList.toggle('display-On-Of', displayToggle);\n\n  if (!displayToggle) {\n    iziToast.show({\n      backgroundColor: '#008ae9',\n      title: `We're sorry`,\n      titleSize: 20,\n      message: `but you've reached the end of search results`,\n      position: 'topRight',\n      iconUrl: 'https://www.svgrepo.com/show/340010/cloud-data-ops.svg',\n      iconColor: '#ffffff',\n      messageSize: '20',\n      messageColor: 'black',\n      timeout: 3000,\n    });\n  }\n}\n\nfunction loaderDisplayOn() {\n  loader.classList.remove('js-loader');\n}\n\nfunction loaderDisplayOff() {\n  loader.classList.add('js-loader');\n}\n"],"names":["PixabayApiService","params","response","axios","hits","totalHits","error","query","title","message","type","iziToast","galleryEl","lightbox","SimpleLightbox","renderGallery","imagesArr","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","formEl","paginationButton","loader","apiService","event","inputQuery","loaderDisplayOn","loaderDisplayOff","paginationBtnDisplayToggle","firstGalleryItem","height","displayToggle"],"mappings":"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"}