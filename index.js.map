{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nimport { loadMoreBtnHidden, loadMoreBtnVisual } from '../main';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet page = 1;\nlet per_page = 15;\n\nexport async function dataRequest(value, newSearch = false) {\n  if (newSearch) {\n    page = 1;\n  }\n\n  const params = new URLSearchParams({\n    key: '49255995-7f6d469d944259310339ef533',\n    q: value,\n    image_type: 'photo',\n    page,\n    per_page,\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  try {\n    const response = await axios.get('https://pixabay.com/api/', { params });\n\n    const dataImages = response.data.hits;\n\n    let totalImages = response.data.totalHits;\n\n    if (dataImages.length === 0) {\n      message_DataIsEmpty();\n      return [];\n    }\n\n    if (page * per_page <= totalImages) {\n      loadMoreBtnVisual();\n    } else {\n      endingSearch();\n    }\n\n    page += 1;\n\n    return dataImages;\n  } catch (error) {\n    message_ErrorFetchingData();\n    console.error('Error fetching data:', error);\n    return [];\n  }\n}\n\nfunction message_DataIsEmpty() {\n  iziToast.show({\n    title: 'Sorry,',\n    titleSize: '21',\n    message:\n      'there are no images matching your search query. Please try again!',\n    position: 'topRight',\n    iconUrl: 'https://www.svgrepo.com/show/340010/cloud-data-ops.svg',\n    iconColor: '#ffffff',\n    messageSize: '21',\n    messageColor: 'black',\n  });\n}\n\nfunction message_ErrorFetchingData() {\n  iziToast.show({\n    title: 'Sorry,',\n    titleSize: '21',\n    message: 'Error Fetching Data:',\n    position: 'topRight',\n    iconUrl: 'https://www.svgrepo.com/show/340010/cloud-data-ops.svg',\n    iconColor: '#ffffff',\n    messageSize: '21',\n    messageColor: 'black',\n  });\n}\n\nfunction endingSearch() {\n  loadMoreBtnHidden();\n\n  iziToast.show({\n    title: 'Sorry,',\n    titleSize: '21',\n    message: `We're sorry, but you've reached the end of search results.`,\n    position: 'topRight',\n    iconUrl: 'https://www.svgrepo.com/show/340010/cloud-data-ops.svg',\n    iconColor: '#ffffff',\n    messageSize: '21',\n    messageColor: 'black',\n  });\n}\n","export function renderGallery(imagesDataArray, gallery) {\n  const markup = imagesDataArray\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class='gallery__item'>\n              <div class='gallery__container '>\n                <a href='${largeImageURL}'>\n                 \n                    <span class=' loader-position loader '></span>\n                    <img\n                      class='gallery__image'\n                      src='${webformatURL}'\n                      alt='${tags}'\n                      onload=\"this.previousElementSibling.style.visibility = 'hidden';\" \n                      onerror=\"this.previousElementSibling.visibility = 'hidden';\" \n                    />\n                 \n                </a>\n\n                <ul class='gallery_user-stats'>\n                  <li class='gallery__user-stats-item'>\n                    <p class='gallery__user-stats-text'>\n                      Likes:<span>${likes}</span>\n                    </p>\n                  </li>\n                  <li class='gallery__user-stats-item'>\n                    <p class='gallery__user-stats-text'>\n                      Views:<span>${views}</span>\n                    </p>\n                  </li>\n                  <li class='gallery__user-stats-item'>\n                    <p class='gallery__user-stats-text'>\n                      Comments:<span>${comments}</span>\n                    </p>\n                  </li>\n                  <li class='gallery__user-stats-item'>\n                    <p class='gallery__user-stats-text'>\n                      Downloads:<span>${downloads}</span>\n                    </p>\n                  </li>\n                </ul>\n              </div>\n            </li>`;\n      },\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import { dataRequest } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightboxEl = new SimpleLightbox('.gallery__container a');\n\nconst HTMLelements = {\n  formEl: document.querySelector('.form'),\n  galleryEl: document.querySelector('.js-gallery'),\n  loadMoreButtonEl: document.querySelector('.js-load-more-button'),\n  loader: document.querySelector('.loader'),\n};\n\nconst { formEl, galleryEl, loadMoreButtonEl, loader } = HTMLelements;\nlet inputValue = '';\n\nformEl.addEventListener('submit', async (event) => {\n  event.preventDefault();\n\n  const form = new FormData(formEl);\n\n  inputValue = form.get('input');\n\n  galleryEl.innerHTML = '';\n  loadMoreBtnHidden();\n  loader.classList.remove('loader-hidden');\n\n  if (!inputValue) {\n    return;\n  }\n\n  const imagesDataArray = await dataRequest(inputValue, true).finally(() =>\n    loader.classList.add('loader-hidden'),\n  );\n\n  renderGallery(imagesDataArray, galleryEl);\n\n  lightboxEl.refresh();\n\n  formEl.reset();\n});\n\nexport function loadMoreBtnVisual() {\n  loadMoreButtonEl.classList.add('display-visual');\n}\n\nexport function loadMoreBtnHidden() {\n  loadMoreButtonEl.classList.remove('display-visual');\n}\n\nloadMoreButtonEl.addEventListener('click', async (event) => {\n  event.preventDefault();\n\n  const imagesDataArray = await dataRequest(inputValue).finally(() =>\n    loader.classList.add('loader-hidden'),\n  );\n\n  renderGallery(imagesDataArray, galleryEl);\n\n  lightboxEl.refresh();\n\n  const element = document.querySelector('.gallery__item');\n\n  const height = element.getBoundingClientRect().height;\n\n  window.scrollBy({ top: height * 2, behavior: 'smooth' });\n});\n"],"names":["page","per_page","dataRequest","value","newSearch","params","response","axios","dataImages","totalImages","message_DataIsEmpty","loadMoreBtnVisual","endingSearch","error","message_ErrorFetchingData","iziToast","loadMoreBtnHidden","renderGallery","imagesDataArray","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightboxEl","SimpleLightbox","HTMLelements","formEl","galleryEl","loadMoreButtonEl","loader","inputValue","event","height"],"mappings":"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"}